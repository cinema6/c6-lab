<!doctype html>
<html class="no-js" lang="">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>C6 Mobile Card Flipper Player</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/mobile-card-flipper.css">

    <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="js/hammer.min.js"></script>
</head>
<body>



    <div class="viewPane">
        
        <div class="infoPanel__group">
            <div class="infoPanel">
                <div class="infoTitle__group">
                    <a href="#" class="sponsor__logo sponsor__logo--large sponsor__logo--round">
                        <img src="https://yt3.ggpht.com/-H1KqX5HicIU/AAAAAAAAAAI/AAAAAAAAAAA/M-IrkLisjV0/s100-c-k-no/photo.jpg"
                        alt="Star Wars" class="sponsor__logoImg sponsor__logoImg--large">
                    </a>
                    <h1 class="infoTitle__title">10 Reasons The New Star Wars Movies Will Be Amazing</h1>
                </div>
                <div class="infoSponsor__group">
                    <h2 class="infoSponsor__tag">
                        Sponsored by <a href="#" title="Star Wars: The Force Awakens">Star Wars: The Force Awakens</a>
                    </h2>
                </div>

                <button class="actionBtn actionBtn__closeInfo" type="button" title="Ok"><span class="actionBtn__label">OK</span></button>
            </div>
        </div>
        
        <div class="viewPane">
            <div class="headerBar__group">
                <button class="navBtn headerBar__infoBtn c6sprite c6sprite--infoIcon" type="button" title="Info">
                    <span class="ir">Info</span>
                </button>
                <h2 class="headerBar__tag">
                    Sponsored by <a href="#" title="Star Wars: The Force Awakens">Star Wars: The Force Awakens</a>
                </h2>
                <button class="navBtn headerBar__closeBtn c6sprite c6sprite--closeIcon" type="button" title="Close">
                    <span class="ir">Close</span>
                </button>
            </div>
            <div class="mrTitle__group mrTitle__group--sponsored">
                <a href="#" class="sponsor__logo sponsor__logo--round">
                    <img src="https://yt3.ggpht.com/-H1KqX5HicIU/AAAAAAAAAAI/AAAAAAAAAAA/M-IrkLisjV0/s100-c-k-no/photo.jpg"
                    alt="Star Wars" class="sponsor__logoImg">
                </a>
                <h1 class="mrTitle__text">10 Reasons The New Star Wars Movies Will Be Amazing</h1>
            </div>

            <ul class="cards__list" id="cardStack">
                <li class="cards__item cards__item--current">
                    <div class="card__holder">
                        <div class="card__group card__group--front">
                            <div class="player__group" style="background-image:url('https://i.ytimg.com/vi/ngElkyQ6Rhs/0.jpg');">&nbsp;</div>
                            <h1 class="card__title">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros.</h1>
                            <div class="skipTimer__meter">&nbsp;</div>
                        </div>
                        <div class="card__group card__group--back">
                            <h1 class="card__title">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros.</h1>
                            <div class="card__copy">
                                Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros. Nullam malesuada erat ut turpis. Suspendisse urna nibh, viverra non, semper suscipit, posuere a, pede. Donec nec justo eget felis facilisis fermentum. Aliquam porttitor mauris sit amet orci. Aenean dignissim pellentesque felis.
                            </div>
                            <div class="skipTimer__meter">&nbsp;</div>
                        </div>
                    </div>
                </li>
                <li class="cards__item">
                    <div class="card__holder">
                        <div class="card__group card__group--front">
                            <div class="player__group" style="background-image:url('https://i.ytimg.com/vi/ngElkyQ6Rhs/0.jpg');">&nbsp;</div>
                            <h1 class="card__title">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros.</h1>
                            <button class="actionBtn adSkipTestBtn" type="Test Ad Skip" style="margin-top:12px;">Test Ad Skip</button>
                            <div class="skipTimer__meter">&nbsp;</div>
                        </div>
                        <div class="card__group card__group--back">
                            <h1 class="card__title">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros.</h1>
                            <div class="card__copy">
                                Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros. Nullam malesuada erat ut turpis. Suspendisse urna nibh, viverra non, semper suscipit, posuere a, pede. Donec nec justo eget felis facilisis fermentum. Aliquam porttitor mauris sit amet orci. Aenean dignissim pellentesque felis.
                            </div>
                            <div class="skipTimer__meter">&nbsp;</div>
                        </div>
                    </div>
                </li>
                <li class="cards__item">
                    <div class="card__holder">
                        <div class="card__group card__group--front">
                            <div class="player__group" style="background-image:url('https://i.ytimg.com/vi/ngElkyQ6Rhs/0.jpg');">&nbsp;</div>
                            <h1 class="card__title">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros.</h1>
                            <div class="skipTimer__meter">&nbsp;</div>
                        </div>
                        <div class="card__group card__group--back">
                            <h1 class="card__title">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros.</h1>
                            <div class="card__copy">
                                Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros. Nullam malesuada erat ut turpis. Suspendisse urna nibh, viverra non, semper suscipit, posuere a, pede. Donec nec justo eget felis facilisis fermentum. Aliquam porttitor mauris sit amet orci. Aenean dignissim pellentesque felis.
                            </div>
                            <div class="skipTimer__meter">&nbsp;</div>
                        </div>
                    </div>
                </li>
                <li class="cards__item">
                    <div class="card__holder">
                        <div class="card__group card__group--front">
                            <div class="player__group" style="background-image:url('https://i.ytimg.com/vi/ngElkyQ6Rhs/0.jpg');">&nbsp;</div>
                            <h1 class="card__title">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros.</h1>
                            <div class="skipTimer__meter">&nbsp;</div>
                        </div>
                        <div class="card__group card__group--back">
                            <h1 class="card__title">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros.</h1>
                            <div class="card__copy">
                                Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros. Nullam malesuada erat ut turpis. Suspendisse urna nibh, viverra non, semper suscipit, posuere a, pede. Donec nec justo eget felis facilisis fermentum. Aliquam porttitor mauris sit amet orci. Aenean dignissim pellentesque felis.
                            </div>
                            <div class="skipTimer__meter">&nbsp;</div>
                        </div>
                    </div>
                </li>
                <li class="cards__item">
                    <div class="card__holder">
                        <div class="card__group card__group--front">
                            <div class="player__group" style="background-image:url('https://i.ytimg.com/vi/ngElkyQ6Rhs/0.jpg');">&nbsp;</div>
                            <h1 class="card__title">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros.</h1>
                            <div class="skipTimer__meter">&nbsp;</div>
                        </div>
                        <div class="card__group card__group--back">
                            <h1 class="card__title">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros.</h1>
                            <div class="card__copy">
                                Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros. Nullam malesuada erat ut turpis. Suspendisse urna nibh, viverra non, semper suscipit, posuere a, pede. Donec nec justo eget felis facilisis fermentum. Aliquam porttitor mauris sit amet orci. Aenean dignissim pellentesque felis.
                            </div>
                            <div class="skipTimer__meter">&nbsp;</div>
                        </div>
                    </div>
                </li>
            </ul>
            <div class="skipTimer__group">Skip in 5</div>
           
            <nav class="navBar__group">
                <button class="navBtn navBar__prevBtn c6sprite c6sprite--leftArrowIcon" type="button" title="Previous Card">
                    <span class="ir">Previous Card</span>
                </button>
                <button class="navBtn navBar__flipBtn c6sprite c6sprite--flipIcon" type="button" title="Flip Card">
                    <span class="navBtn__label">Flip Card</span>
                </button>
                <button class="navBtn navBar__nextBtn c6sprite c6sprite--rightArrowIcon" type="button" title="Next Card">
                    <span class="ir">Next Card</span>
                </button>
            </nav>
        </div>

    </div>

    <div class="viewPane viewPane--landscape">No landscape.</div>


    <script type="text/javascript">
        var cardNum     = 0,
            cardMax     = $('.cards__item').length,
            slideInc    = -0.84,
            slideAmount = 0,
            isLocked    = false,
            $myCards    = $('.cards__list'),
            $myCard     = $('.cards__item:nth-child(' + (cardNum + 1) + ')'),
            $myCardHolder   = $myCard.find('.card__holder'),
            cardWidth   = $myCard.width(),
            myCards     = document.getElementById('cardStack'),
            $flipBtn    = $('.navBar__flipBtn'),
            $prevBtn    = $('.navBar__prevBtn'),
            $nextBtn    = $('.navBar__nextBtn'),
            $showInfoBtn    = $('.headerBar__infoBtn'),
            $hideInfoBtn    = $('.actionBtn__closeInfo'),
            $infoPanel  = $('.infoPanel__group'),
            $adSkipBtn  = $('.adSkipTestBtn'),
            hammerTime  = new Hammer(myCards),
            goNext      = function() {
                cardNum++;
                if(cardNum > cardMax - 1) {
                    cardNum = cardMax - 1;
                };
                $('.cards__item--current').removeClass('cards__item--current');
                $('.card__holder--flipped').removeClass('card__holder--flipped');
                doSlide();
            },
            goPrev      = function() {
                cardNum--;
                if(cardNum < 0) {
                    cardNum = 0;
                };
                $('.cards__item--current').removeClass('cards__item--current');
                $('.card__holder--flipped').removeClass('card__holder--flipped');
                doSlide();
            },
            doSlide     = function() {
                slideAmount     = -cardNum * cardWidth;
                $myCard     = $('.cards__item:nth-child(' + (cardNum + 1) + ')');
                $myCardHolder   = $myCard.find('.card__holder');

                $myCard.addClass('cards__item--current');
                $myCards.addClass('cards__list--animator');
                $myCards.css({ "-webkit-transform": "translate3d(" + slideAmount + "px,0,0)", "transform": "translate3d(" + slideAmount + "px,0,0)" });
            },
            lockCards       = function() {
                isLocked    = true;
            },
            startAdTimer    = function() {
                var $myTimer    = $myCard.find('.skipTimer__meter'),
                    $skipText   = $('.skipTimer__group'),
                    $viewPane   = $('.viewPane'),
                    $otherCards = $('.cards__item').not('.cards__item--current');

                isLocked    = true;
                $prevBtn.stop().hide();
                $nextBtn.stop().hide();
                $skipText.stop().fadeIn();
                $viewPane.addClass('viewPane--focusMode');
                $otherCards.stop().addClass('cards__item--hidden');
                $myTimer.stop().css('width','100%').show().animate({width: "0"}, 5000, function() {
                    $skipText.stop().fadeOut();
                    $prevBtn.stop().fadeIn();
                    $nextBtn.stop().fadeIn();
                    $myTimer.hide();
                    $viewPane.removeClass('viewPane--focusMode');
                    $otherCards.stop().removeClass('cards__item--hidden');
                    isLocked    = false;
                });
            };
        
        $flipBtn.click(function() {
            $myCardHolder.toggleClass('card__holder--flipped');
        });

        $showInfoBtn.click(function() {
            $infoPanel.css({ "-webkit-transform": "translate3d(0,0,0)", "transform": "translate3d(0,0,0)" });
        });

        $hideInfoBtn.click(function() {
            $infoPanel.css({ "-webkit-transform": "translate3d(-100%,0,0)", "transform": "translate3d(-100%,0,0)" });
        });

        $nextBtn.click(function() {
            goNext();
        });

        $prevBtn.click(function() {
            goPrev();
        });

        hammerTime.on('panleft', function(ev) {
            slideAmount     = -cardNum * cardWidth + ev.deltaX;
            $myCards.removeClass('cards__list--animator');
            if(isLocked && slideAmount < -cardNum * cardWidth - 30) {
                slideAmount     = -cardNum * cardWidth - 30;
            }
            $myCards.css({ "-webkit-transform": "translate3d(" + slideAmount + "px,0,0)", "transform": "translate3d(" + slideAmount + "px,0,0)" });
        });
        hammerTime.on('panright', function(ev) {
            slideAmount     = -cardNum * cardWidth + ev.deltaX;
            $myCards.removeClass('cards__list--animator');
            if(isLocked && slideAmount > -cardNum * cardWidth + 30) {
                slideAmount     = -cardNum * cardWidth + 30;
            }
            $myCards.css({ "-webkit-transform": "translate3d(" + slideAmount + "px,0,0)", "transform": "translate3d(" + slideAmount + "px,0,0)" });
        });
        hammerTime.on('pan', function(ev) {
            //test if gesture is complete
            if(ev.isFinal) {
                //test for next swipe
                if(ev.deltaX > 0) {
                    //go next if delta is big enough & if state is unlocked
                    if(Math.abs(ev.deltaX) > (cardWidth / 3.8) && !isLocked) {
                        goPrev();
                    }
                    //otherwise, keep user on current card
                    else {
                        doSlide();
                    }
                //test for prev swipe
                } else {
                    //go prev if delta is big enough & if state is unlocked
                    if(Math.abs(ev.deltaX) > (cardWidth / 3.8) && !isLocked) {
                        goNext();
                    }
                    //otherwise, keep user on current card
                    else {
                        doSlide();
                    }
                }
            }
        });
        


        $adSkipBtn.click(function() {
            startAdTimer();
        });



    </script>
</body>
</html>
